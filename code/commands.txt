Preprocess:
python graph_downloader.py
python rdf2triples.py
python gold_pair_downloader.py

Dogtags:
python dogtag_short.py -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short -s -1
python dogtag_short.py -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences -s 2
python dogtag_long.py -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long

EMBEDDER:
python embedder.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short/str -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_embeddings
python embedder.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences/str -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences_embeddings
python embedder.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long/str -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_embeddings


TopX Pairs:
python TopX_pairs.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_embeddings -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_top10pairs -k 10
python TopX_pairs.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_embeddings -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -k 10
python TopX_pairs.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences_embeddings -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences_top10pairs -k 10


Top1 Pairs
python Top1_pairs.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_top10pairs -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top1
python Top1_pairs.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top1
python Top1_pairs.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences_top10pairs -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top1


GENAI:
python GenAI_input_generator.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_top10pairs -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short/raw -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/genai/dogtag_short_top10pairs_notstrict/ --method 1
python GenAI_input_generator.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_top10pairs -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short/raw -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/genai/dogtag_short_top10pairs_strict/ --method 2
python GenAI_input_generator.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long/raw -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/genai/dogtag_long_top10pairs_notstrict/ --method 1
python GenAI_input_generator.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long/raw -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/genai/dogtag_long_top10pairs_strict/ --method 2
python GenAI_input_generator.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences_top10pairs -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences/raw -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/genai/dogtag_short_2sentences_top10pairs_notstrict/ --method 1
python GenAI_input_generator.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences_top10pairs -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences/raw -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/genai/dogtag_short_2sentences_top10pairs_strict/ --method 2

    # PARSE OUTPUTS
    python extract_top10_response.py -t /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -r /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/prompts_outputs/final_dogtag_long_Llama70B_strict  -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_strict
    python extract_top10_response.py -t /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -r /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/prompts_outputs/final_dogtag_long_Llama70B_notstrict  -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_notstrict
    python extract_top10_response.py -t /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -r /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/prompts_outputs/final_dogtag_short_Llama70B_strict  -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_strict
    python extract_top10_response.py -t /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -r /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/prompts_outputs/final_dogtag_short_Llama70B_notstrict  -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_notstrict
    python extract_top10_response.py -t /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -r /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/prompts_outputs/final_dogtag_short_2sentences_Llama70B_strict  -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_strict
    python extract_top10_response.py -t /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_top10pairs -r /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/prompts_outputs/final_dogtag_short_2sentences_Llama70B_notstrict  -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_notstrict

#NEIGBOURHOOD GENERATION
python node_neighbourhood_gather.py -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long/raw -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_nb
python node_nb_promptgen.py -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_nb/str -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_nb_prompts

    # PARSE OUTPUTS
    python extract_nb_response.py -r /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/prompts_outputs/dogtag_nb_prompts_response -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_nb/str/ -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_nb_summaries

EXACT MATCH:
    python exactmatch.py
    # output - /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/exactmatch_all/label_altlabel/

RERANKED - TOPX
python Reranked_TopX.py -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short/str -e /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_embeddings -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_reranked100 -k 100 --gpu
python Reranked_TopX.py -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences/str -e /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences_embeddings -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_short_2sentences_reranked100 -k 100 --gpu
python Reranked_TopX.py -d /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long/str -e /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_embeddings -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_long_reranked100 -k 100 --gpu


DEDUPLICATION
python exact_match_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/exactmatch_all/label_altlabel/ -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/exactmatch_dedup/

python score_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_reranked100/ -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_reranked100_deduplicated/
python score_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_reranked100/ -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_reranked100_deduplicated/
python score_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_reranked100/ -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_reranked100_deduplicated/

python exact_match_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_strict -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_strict_deduplicated
python exact_match_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_notstrict -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_notstrict_deduplicated
python exact_match_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_strict -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_strict_deduplicated
python exact_match_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_notstrict -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_notstrict_deduplicated
python exact_match_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_strict -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_strict_deduplicated
python exact_match_deduplicate.py -i /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_notstrict -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_notstrict_deduplicated


UNION RESULTS:
python union_pairs.py -em /Users/matevass/Documents/Projects/KGEntityMatching-Public/results/exactmatch_deduplicated -fp /Users/matevass/Documents/Projects/KGEntityMatching-Public/results/dogtag_long_top100_rerank_deduplicated -o /Users/matevass/Documents/Projects/KGEntityMatching-Public/results/union_median -m median

EVALUATE RESULTS:
python eval_folder.py -p /Users/matevass/Documents/Projects/KGEntityMatching-Public/results/union_median

python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top1
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top1
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top1
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_reranked100
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_reranked100
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_reranked100
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_reranked100_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_reranked100_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_reranked100_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_notstrict
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_notstrict_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_strict
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_long_top10pairs_llm_strict_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_notstrict
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_notstrict_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_strict
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_2sentences_top10pairs_llm_strict_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_notstrict
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_notstrict_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_strict
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/dogtag_short_top10pairs_llm_strict_deduplicated
python eval_folder.py -p /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_data/output_pairs/exactmatch_all/label_altlabel


MilServer
python runprompts_accelerate.py -f /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_nb_prompts -fi XY -o /home/kardosp/entity_alignment/kg_entity_alignment_2024/repo_features/dogtag_llm -m meta-llama/Llama-3.1-70B-Instruct -r
